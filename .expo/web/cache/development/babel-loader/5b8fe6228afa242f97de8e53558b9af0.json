{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nexport var RootControllerChanges;\n\n(function (RootControllerChanges) {\n  RootControllerChanges[RootControllerChanges[\"Insert\"] = 0] = \"Insert\";\n  RootControllerChanges[RootControllerChanges[\"Update\"] = 1] = \"Update\";\n  RootControllerChanges[RootControllerChanges[\"Remove\"] = 2] = \"Remove\";\n})(RootControllerChanges || (RootControllerChanges = {}));\n\nvar RootController = function () {\n  function RootController() {\n    _classCallCheck(this, RootController);\n\n    this.siblings = new Set();\n    this.pendingActions = [];\n    this.callback = null;\n  }\n\n  _createClass(RootController, [{\n    key: \"update\",\n    value: function update(id, element, callback) {\n      if (!this.siblings.has(id)) {\n        this.emit(id, {\n          change: RootControllerChanges.Insert,\n          element: element,\n          updateCallback: callback\n        });\n        this.siblings.add(id);\n      } else {\n        this.emit(id, {\n          change: RootControllerChanges.Update,\n          element: element,\n          updateCallback: callback\n        });\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy(id, callback) {\n      if (this.siblings.has(id)) {\n        this.emit(id, {\n          change: RootControllerChanges.Remove,\n          element: null,\n          updateCallback: callback\n        });\n        this.siblings.delete(id);\n      } else if (callback) {\n        callback();\n      }\n    }\n  }, {\n    key: \"setCallback\",\n    value: function setCallback(callback) {\n      this.callback = callback;\n      this.pendingActions.forEach(function (_ref) {\n        var id = _ref.id,\n            action = _ref.action;\n        callback(id, action);\n      });\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(id, action) {\n      if (this.callback) {\n        this.callback(id, action);\n      } else {\n        this.pendingActions.push({\n          action: action,\n          id: id\n        });\n      }\n    }\n  }]);\n\n  return RootController;\n}();\n\nexport { RootController as default };","map":{"version":3,"mappings":";;AAEA,WAAYA,qBAAZ;;AAAA,WAAYA,qBAAZ,EAAiC;EAC/BA;EACAA;EACAA;AACD,CAJD,EAAYA,qBAAqB,KAArBA,qBAAqB,MAAjC;;IAYqBC,c;EAArB;IAAA;;IACU,gBAAwB,IAAIC,GAAJ,EAAxB;IACA,sBAGH,EAHG;IAIA,gBAEG,IAFH;EAqDT;;;;WAjDQ,gBAAOC,EAAP,EAAmBC,OAAnB,EAAuCC,QAAvC,EAA4D;MACjE,IAAI,CAAC,KAAKC,QAAL,CAAcC,GAAd,CAAkBJ,EAAlB,CAAL,EAA4B;QAC1B,KAAKK,IAAL,CAAUL,EAAV,EAAc;UACZM,MAAM,EAAET,qBAAqB,CAACU,MADlB;UAEZN,OAAO,EAAPA,OAFY;UAGZO,cAAc,EAAEN;QAHJ,CAAd;QAKA,KAAKC,QAAL,CAAcM,GAAd,CAAkBT,EAAlB;MACD,CAPD,MAOO;QACL,KAAKK,IAAL,CAAUL,EAAV,EAAc;UACZM,MAAM,EAAET,qBAAqB,CAACa,MADlB;UAEZT,OAAO,EAAPA,OAFY;UAGZO,cAAc,EAAEN;QAHJ,CAAd;MAKD;IACF;;;WAEM,iBAAQF,EAAR,EAAoBE,QAApB,EAAyC;MAC9C,IAAI,KAAKC,QAAL,CAAcC,GAAd,CAAkBJ,EAAlB,CAAJ,EAA2B;QACzB,KAAKK,IAAL,CAAUL,EAAV,EAAc;UACZM,MAAM,EAAET,qBAAqB,CAACc,MADlB;UAEZV,OAAO,EAAE,IAFG;UAGZO,cAAc,EAAEN;QAHJ,CAAd;QAKA,KAAKC,QAAL,CAAcS,MAAd,CAAqBZ,EAArB;MACD,CAPD,MAOO,IAAIE,QAAJ,EAAc;QACnBA,QAAQ;MACT;IACF;;;WAEM,qBACLA,QADK,EACuD;MAE5D,KAAKA,QAAL,GAAgBA,QAAhB;MACA,KAAKW,cAAL,CAAoBC,OAApB,CAA4B,gBAAmB;QAAA,IAAhBd,EAAgB,QAAhBA,EAAgB;QAAA,IAAZe,MAAY,QAAZA,MAAY;QAC7Cb,QAAQ,CAACF,EAAD,EAAKe,MAAL,CAAR;MACD,CAFD;IAGD;;;WAEO,cAAKf,EAAL,EAAiBe,MAAjB,EAA6C;MACnD,IAAI,KAAKb,QAAT,EAAmB;QACjB,KAAKA,QAAL,CAAcF,EAAd,EAAkBe,MAAlB;MACD,CAFD,MAEO;QACL,KAAKF,cAAL,CAAoBG,IAApB,CAAyB;UACvBD,MAAM,EAANA,MADuB;UAEvBf,EAAE,EAAFA;QAFuB,CAAzB;MAID;IACF;;;;;;SA1DkBF,c","names":["RootControllerChanges","RootController","Set","id","element","callback","siblings","has","emit","change","Insert","updateCallback","add","Update","Remove","delete","pendingActions","forEach","action","push"],"sourceRoot":"","sources":["../src/RootController.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}